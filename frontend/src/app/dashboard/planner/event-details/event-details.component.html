<ion-card class="ion-padding-bottom">
  <ion-card-header>
    <ion-title>
      {{ this.event.title }}
    </ion-title>
  </ion-card-header>

  <ion-card-subtitle>
    <ion-chip class="status-chip" color="primary">
      {{ getStatusLabel(this.event.status) }}
    </ion-chip>
    <ion-icon class="ion-margin-top edit-button" size="small" name="create-outline" (click)="navigateToUpdateEvent()"></ion-icon>
    <ion-icon class="ion-margin-top" size="small" name="trash-outline" (click)="deleteEvent()"></ion-icon>
  </ion-card-subtitle>

  <ion-item *ngIf="event.status != 0">
    <ion-label>Starting time: </ion-label>
    <ion-badge color="secondary" slot="end"> {{ formatEventTime(this.event.startingTime) }}
    </ion-badge>
  </ion-item>

  <ion-item *ngIf="event.status == 2">
    <ion-label>Duration: </ion-label>
    <ion-badge color="secondary" slot="end">
      {{ getEventDuration() }}
    </ion-badge>
  </ion-item>

  <ion-item>
    <ion-label>Type:</ion-label>
    <ion-badge color="secondary" slot="end">
      {{ getTypeLabel(event.type) }}
    </ion-badge>
  </ion-item>

  <ion-accordion-group>
    <ion-accordion>
      <ion-item slot="header">
        <ion-label>Participants</ion-label>
      </ion-item>
      <ion-list slot="content">
        <ion-item *ngFor="let person of event.people">
          {{ getPersonName(person) }}
        </ion-item>
      </ion-list>
    </ion-accordion>
  </ion-accordion-group>

  <!--<ion-item>
    <ion-label>Participants:</ion-label>
    &lt;!&ndash;<ion-select *ngIf="event.people.length > 0" interface="popover">
      <ion-select-option *ngFor="let person of event.people" disabled> {{ getPersonName(person) }} </ion-select-option>
    </ion-select>
    <ion-text *ngIf="!event.people.length">
      None
    </ion-text>&ndash;&gt;
    <ion-list lines="none">
      <ion-item *ngFor="let person of event.people">
        {{ getPersonName(person) }}
      </ion-item>
    </ion-list>
  </ion-item>-->

  <ion-item *ngIf="event.status == 2">
    <ion-label>Grade:</ion-label>
    <ion-badge color="secondary" slot="end">
      {{event.grade}}
    </ion-badge>
  </ion-item>

  <form *ngIf="event.status == 1" [formGroup]="form" (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label>Grade</ion-label>
      <ion-input formControlName="grade" placeholder="grade" type="number"></ion-input>
      <span *ngIf="hasEndEventButtonBeenCliked && form.controls.grade.hasError('required')" slot="error">
        Field is required
      </span>
    </ion-item>
    <ion-button class="ion-margin" expand="full" color="success " type="submit"> End Event </ion-button>
  </form>

  <ion-button disabled="{{isStartEventButtonDisabled()}}" class="ion-margin" *ngIf="isEnabled()" expand="full" color="success" (click)="updateEvent()">
    {{getEventAction()}}
  </ion-button>
</ion-card>
